---
title:		'Humdrum Toolkit Command Reference -- num'
author:		David Huron
last-edited:
chapternav:	tool
vim:		ft=html
permalink:	/tool/num/index.html
---

### COMMAND

<span class="tool">num</span> -- number selected Humdrum records according to user-defined
criteria

------------------------------------------------------------------------

## SYNOPSIS ##

` num [-efT] [-a **interp] [-i n] [-n regexp] [-o n] [-O n] [-p regexp] [-P regexp] [-r regexp] [-R regexp] [-s regexp] [-S regexp] [-x regexp] [-z regexp] [-Z regexp] [inputfile ...]`

------------------------------------------------------------------------

## DESCRIPTION ##

The <span class="tool">num</span> command produces sequential numerical output according to
user-defined numbering criteria. In its default operation, <span class="tool">num</span>
simply inserts numbers at the beginning of each data record &mdash;
beginning with the value 1, and increasing by 1 for successive data
records. However, <span class="tool">num</span> provides various options that allow the user
to specify more precisely the kinds of data and conditions under which
numbering occurs.

Numbers may be inserted prior to data tokens, appended following data
tokens, or inserted in the middle of data tokens. Numbers may be output
only for the first input spine, or for all input spines. Alternatively,
numbers may be output in a separate output spine specified by the user.
Numbers may be assigned only to those data records matching a given
regular expression, or may be assigned to all records *other* than those
matching a regular expression. Numerical counts may begin at any real or
integer value and may be incremented or decremented by any real or
integer value. Numbering may restart at some defined value whenever a
certain regular expression is matched in the input. Numbers may be
output only when certain conditions are met; for example, although
counting may continue, outputting of numbers may be suspended or resumed
when the input data match user-specified regular expressions.

By way of example, the <span class="tool">num</span> command might be used to number measures,
phrases, chords, notes, rests, or other musically-pertinent features.
(See [EXAMPLES](#EXAMPLES) below.)

------------------------------------------------------------------------

## OPTIONS ##

The <span class="tool">num</span> command provides the following options:

----------------- --------------------------------------------------------------------
-a *\*\*interp*   append a new spine (*\*\*interp*) containing the output numbers
<span class="option">e</span>            place numbers at end of data tokens (rather than at the beginning)
<span class="option">f</span>            number all spines (all fields) in the input
<span class="option">h</span>            displays a help screen summarizing the command syntax
-i *n*            set increment value to *n* (defaults to 1)
-n *regexp*       number only those records matching *regexp*
-o *n*            set initial offset value to *n* (defaults to 1)
-O *n*            set offset value to *n* after a reset
-p *regexp*       horizontally position the output number immediately following the
first occurrence of *regexp* on the line
-P *regexp*       horizontally position the output number immediately prior to the
first occurrence of *regexp* on the line
-r *regexp*       resume numbering records when *regexp* is matched
-R *regexp*       resume numbering records after *regexp* is matched
-s *regexp*       suspend numbering records when *regexp* is matched
-S *regexp*       suspend numbering records after *regexp* is matched
<span class="option">T</span>            reset counter when all spines have exclusive interpretations
-x *regexp*       exclude numbering those records matching *regexp*
-z *regexp*       reset counter when record matches *regexp*
-Z *regexp*       reset counter after record matches *regexp*
----------------- --------------------------------------------------------------------

Options are specified in the command line.

Normally, the effect of <span class="tool">num</span> is to add numbers to data tokens already
in the input. With the <span class="option">a</span> option, <span class="tool">num</span> creates a new spine which
is appended to the right of the input stream. The numerical outputs of
<span class="tool">num</span> become data records in this new output spine. The user can
specify the name of the output interpretation via the command line
parameter *\*\*interp*. The <span class="option">a</span> option cannot be used with the <span class="option">p</span>
or <span class="option">P</span> options.

The <span class="option">e</span> option causes numbers generated by <span class="tool">num</span> to be append to
the end of each appropriate data token rather than the (default)
beginning of each data token. The <span class="option">e</span> and <span class="option">a</span> options are mutually
exclusive. In addition, the <span class="option">e</span> option cannot be used with the <span class="option">p</span>
or <span class="option">P</span> options.

The <span class="option">f</span> option causes all spines (all fields) in the input to be
numbered rather than the (default) first (left-most) spine. The <span class="option">f</span>
option is mutually exclusive with the <span class="option">a</span> option. In addition, the
<span class="option">f</span> option cannot be used with the <span class="option">p</span> or <span class="option">P</span> options.

The <span class="option">i</span> option allows the user to set the increment value for
successive numbers. The default value is 1 &mdash; meaning that successive
numerical outputs are 1 greater than the previous value. Negative
increment values are also permissible. For example, the user might
define an initial value beginning at 100, and decrement by 5 with each
successive value.

The <span class="option">n</span> option causes <span class="tool">num</span> to output numerical values, only when
the current data record matches a specified regular expression.

The <span class="option">o</span> option is used to define an initial (offset) value from which
subsequent numbers are calculated. If no offset is defined, the default
value is 1.

The <span class="option">O</span> option defines an offset value to which the counter will be
returned each time a *reset* action occurs. The <span class="option">O</span> option should be
used in conjunction with one of either the <span class="option">T</span>, <span class="option">z</span> or <span class="option">Z</span>
options.

The <span class="option">p</span> and <span class="option">P</span> options allow the user to place any output
numerical value in a particular (horizontal) place in the output line.
In the case of <span class="option">p</span> the output number is positioned immediately
following the first (left-most) string matching the specified regular
expression. With the <span class="option">P</span> option, the output number is positioned
immediately prior to the first string matching the specified regular
expression. The <span class="option">p</span> and <span class="option">P</span> options cannot be used with either the
<span class="option">a</span>, <span class="option">e</span> or <span class="option">f</span> options.

The <span class="option">r</span> option defines a condition under which the outputting of
numbers will resume. Specifically, the user defines a regular expression
with the <span class="option">r</span> option that, when matched, causes the immediate
resumption of printing.

The <span class="option">R</span> option is similar to the <span class="option">r</span> option, with the exception
that outputting of numbers is resumed *after* any record matching the
specified regular expression.

The <span class="option">s</span> option causes the outputting of numbers to be suspended when
an input record matches a specified regular expression. Although the
numerical values are not outputted, the numerical values continue to be
incremented in accordance with the defined counting conditions.

The <span class="option">S</span> option is similar to the <span class="option">s</span> option, with the exception
that the outputting of numbers is suspended *after* any record matching
the specified regular expression.

The <span class="option">T</span> option causes the counter to be reset (to the value specified
by <span class="option">O</span>) whenever exclusive interpretations are encountered in all of
the input spines. If no initial offset has been specified via the <span class="option">O</span>
option, then the counter is reset to the value 1.

The <span class="option">x</span> option causes records matching a given regular expression to
be excluded from the counting; no output is generated for such records.
Note that when used in conjunction with the <span class="option">n</span> option, both the
*match* and *don't match* criteria must be fulfilled in order for the
current record to participate in the counting.

The <span class="option">z</span> option causes the counter to be reset (to the value specified
by <span class="option">O</span>) whenever a data record matches a specified regular
expression. If no initial offset has been specified via the <span class="option">O</span>
option, then the counter is reset to the value 1.

The <span class="option">Z</span> option is similar to the <span class="option">z</span> option, with the exception
that the counter is reset *after* any record matching the specified
regular expression.

------------------------------------------------------------------------

[]{#EXAMPLES}

## EXAMPLES ##

The following examples illustrate how <span class="tool">num</span> may be used. Consider the
following input (left spine) and corresponding <span class="tool">num</span> output (right
spine). ``

---------- -------------
\*\*kern   \*\*plength
=23        .
{8a        .
.          .
8cc        .
}8ee       3
{8g\#      .
=24        .
8dd        .
8ee        .
}8ff       4
8r         .
.          .
=25        .
{8gn       .
8cc        .
}8ee       3
{8f\#      .
=26        .
8cc        .
8dd        .
}8ee-      4
\*-        \*-
---------- -------------

The <span class="rep">plength</span> output indicates the number of notes in each phrase for
the corresponding <span class="rep">kern</span> spine. The output was generated using the
following command:

` num -a '**plength' -z '{' -x '[.r=]' -s '{' -r '}' -S '}'`

The <span class="option">x</span> option excludes <span class="rep">kern</span> rests, barlines, and null tokens
from the counting. The <span class="option">z</span> option causes the counter to be reset to 1
whenever a begin-phrase signifier (\`{\') is encountered. The <span class="option">s</span>
option causes suspension of output numbers to occur at the beginning of
each phrase, and the <span class="option">r</span> option causes output numbers to be resumed
at the end of each phrase (hence, only the phrase-end signifiers are
given numbered output). The <span class="option">S</span> option ensures that numbers are not
printed for notes outside of phrases; that is, it suspends outputting
numbers following the end of a phrase.§ .FS § Note that this command
will still fail to suppress the numbering of notes occuring prior to the
first phrase. .FE The <span class="option">a</span> option causes the numbers to be output as a
separate spine labelled <span class="rep">plength</span>.

The command

` num -a '**ordo' koto`

outputs a new spine labelled <span class="rep">ordo</span> containing successive integers
beginning at 1 for each data record in the input.

` num -n '^=' -x '==' -p '=' -o 108 sarod`

numbers all \"common system\" barlines in the file `sarod`, beginning
with measure 108. Double barlines are not numbered (due to the <span class="option">x</span>
option) and numbers are positioned directly following the equals sign
(due to the <span class="option">p</span> option). The <span class="option">p</span> option ensures that the number
precedes pause markings and other possible barline signifiers. Note that
if measure numbers already exist for a file, the measures can be
renumbered by first removing the existing measure numbers using
<span class="tool">humsed</span>.

The command

` num -a '**phrase#' -n '{' -T rebec`

outputs a spine containing numbers that number the beginning of each
<span class="rep">kern</span> phrase for the file `rebec`; if any exclusive interpretation is
encountered, the phrase numbering is restarted at 1.

The command

` num -x '^='`

numbers all data records other than common system barlines.

` num -x '^=' -Z '='`

numbers all data records within each common system measure &mdash; starting
at the value 1 with each new measure.

------------------------------------------------------------------------

## PORTABILITY ##

DOS 2.0 and up, with the MKS Toolkit. OS/2 with the MKS Toolkit. UNIX
systems supporting the *Korn* shell or *Bourne* shell command
interpreters, and revised *awk* (1985).

------------------------------------------------------------------------

## SEE ALSO ##

**nl** (UNIX), **\*\*ordo** (2), <span class="tool">regexp</span> (4),
<span class="tool">regexp</span> (6), <span class="tool">rend</span> (4)

------------------------------------------------------------------------

## NOTES ##

The <span class="option">O</span> option should be used in conjunction with one of either the
<span class="option">T</span>, <span class="option">z</span> or <span class="option">Z</span> options.



